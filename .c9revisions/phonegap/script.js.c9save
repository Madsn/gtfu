{"ts":1365196710867,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var SERVER = \"http://zpc.dk/api/gtfu/\";\nvar gotResponse = function(responseText){\n    /*\n    var notification = window.webkitNotifications.createNotification(\n        '16x16.png',\n        'Server response',\n        responseText\n        );\n    notification.show();\n    setTimeout(function(){\n        notification.cancel();\n    }, 3000);\n*/\n    console.log(responseText);\n};\nvar sendRequest = function(cmdstate) {\n    var xmlHttp = new XMLHttpRequest();\n    var name = document.getElementById('name').value;\n    var pass = document.getElementById('pass').value;\n    var url = SERVER+\"?name=\"+name+\"&password=\"+pass+\"&cmdstate=\"+cmdstate;\n    xmlHttp.addEventListener(\"load\", function(){\n        gotResponse(xmlHttp.responseText);\n        //alert(\"response: \" + xmlHttp.responseText);\n    });\n    xmlHttp.addEventListener(\"error\", function(){\n        alert(\"error: \" + xmlHttp.responseText);\n    });\n    xmlHttp.addEventListener(\"abort\", function(){\n        alert(\"abort: \" + xmlHttp.responseText);\n    });\n    xmlHttp.open(\"GET\", url, false);\n    xmlHttp.send();\n};\n\nvar sendPowerOn         = function(){sendRequest(1)}\n,   sendSoftOff         = function(){sendRequest(2)}\n,   sendForceOff        = function(){sendRequest(3)}\n,   sendForceRestart    = function(){sendRequest(4)};\n\n// store login info in local, to avoid syncing across\n// different installations\nvar storage = window.localStorage;\ndocument.addEventListener('DOMContentLoaded', function() {\n    storage.get('name', function(val){\n        if (val.name != undefined)\n            document.getElementById('name').value = val.name;\n    });\n    storage.get('pass', function(val){\n        if (val.pass != undefined)\n            document.getElementById('pass').value = val.pass;\n    });\n    /* The reason we need to attach all these events\n     * in this file rather than in the html, is that\n     * chrome does not allow this code in the html\n     * for security reasons I guess?\n     */\n    document.querySelector('#powerOn').addEventListener(\n      'click', sendPowerOn);\n    document.querySelector('#softOff').addEventListener(\n      'click', sendSoftOff);\n    document.querySelector('#forceOff').addEventListener(\n      'click', sendForceOff);\n    document.querySelector('#forceRestart').addEventListener(\n      'click', sendForceRestart);\n    document.querySelector('#name').addEventListener(\n      'keyup', setName);\n    document.querySelector('#name').addEventListener(\n      'paste', setName);\n    document.querySelector('#pass').addEventListener(\n      'keyup', setPass);\n    document.querySelector('#pass').addEventListener(\n      'paste', setPass);\n});\n\n\nvar setName = function(){\n    storage.setItem({'name': document.getElementById('name').value}, function(){})\n};\n\nvar setPass = function(){\n    storage.setItem({'pass': document.getElementById('pass').value}, function(){})\n};"]],"start1":0,"start2":0,"length1":0,"length2":2846}]],"length":2846}
{"contributors":[],"silentsave":true,"ts":1365197378521,"patch":[[{"diffs":[[0,".pass !="],[1,"="],[0," undefin"]],"start1":1652,"start2":1652,"length1":16,"length2":17}]],"length":2847,"saved":false}
{"ts":1365197381837,"patch":[[{"diffs":[[0,".name !="],[1,"="],[0," undefin"]],"start1":1508,"start2":1508,"length1":16,"length2":17}]],"length":2848,"saved":false}
{"ts":1365197424960,"patch":[[{"diffs":[[0,"   /"],[-1,"*\n    var notification = window.webkitNotifications.createNotification(\n        '16x16.png',\n        'Server response',\n        responseText\n        );\n    notification.show();\n    setTimeout(function(){\n        notification.cancel();\n    }, 3000);\n*/"],[1,"/ TODO"],[0,"\n   "]],"start1":83,"start2":83,"length1":259,"length2":14}]],"length":2603,"saved":false}
{"ts":1365197427513,"patch":[[{"diffs":[[0," // TODO"],[1,": How"],[0,"\n    con"]],"start1":85,"start2":85,"length1":16,"length2":21}]],"length":2608,"saved":false}
{"ts":1365197433346,"patch":[[{"diffs":[[0,"DO: "],[-1,"How"],[1,"Best way to notify on smartphones v"],[0,"\n   "]],"start1":91,"start2":91,"length1":11,"length2":43}]],"length":2640,"saved":false}
{"ts":1365197435506,"patch":[[{"diffs":[[0,"phones v"],[1,"ia phonegap?"],[0,"\n    con"]],"start1":122,"start2":122,"length1":16,"length2":28}]],"length":2652,"saved":false}
